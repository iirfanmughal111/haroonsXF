var CMTV_Math=window.CMTV_Math||{};
!function(b,f,c){CMTV_Math.EditorDialogMath=XF.extend(XF.EditorDialog,{$form:null,formHandler:null,_beforeShow:function(a){this.ed.$el.blur()},_afterHide:function(a){console.log("here!")},_init:function(a){this.$form=b("#editor_math_form");this.$form.submit(XF.proxy(this,"submit"));this.formHandler=XF.Element.getHandler(this.$form,"insert-math-form")},submit:function(a){a.preventDefault();a=this.ed;var d=this.overlay,e=this.formHandler.wrapMath(this.formHandler.$latexInput.val().trim());a.selection.restore();
a.html.insert(e);d.hide();this.$form.trigger("form:reset")}});XF.EditorHelpers.dialogs.CMTVMath=new CMTV_Math.EditorDialogMath("CMTV_Math");b(c).on("editor:first-start",function(){b.FE.DefineIcon("CMTV_Math",{NAME:"function"});b.FE.RegisterCommand("CMTV_Math",{title:"CMTV_Math_insert_math",icon:"CMTV_Math",undo:!0,focus:!0,callback:function(){XF.EditorHelpers.loadDialog(this,"CMTVMath")}});XF.editorStart.custom.push("CMTV_Math")})}(jQuery,window,document);