<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="public" title="display_order_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="row"
	arg-name="display_order"
	arg-value=""
	arg-step="1"
	arg-label="{{ phrase('display_order') }}"
	arg-hint=""
	arg-readOnly=""
	arg-explain="">

	<xf:numberboxrow name="{$name}" value="{$value}" min="0" step="{$step}"
		label="{$label}"
		hint="{$hint}"
		explain="{$explain}"
		readonly="{{ $readOnly ? 'readonly' : '' }}" />
</xf:macro>

<xf:macro name="input"
	arg-name="display_order"
	arg-value=""
	arg-step="1"
	arg-readOnly="">

	<xf:numberbox name="{$name}" value="{$value}" min="0" step="{$step}" readonly="{{ $readOnly ? 'readonly' : '' }}" />
</xf:macro>]]></template>
  <template type="public" title="fs_forum_groups_moderator_list" version_id="1000100" version_string="1.0.1 Alpha"><![CDATA[<xf:title>{{ phrase('moderators') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('molly/add-moderator', $forumGroup) }}" icon="add">{{ phrase('add_moderator') }}</xf:button>
</xf:pageaction>

<xf:if contentcheck="true">
	<xf:contentcheck>

	<xf:if is="$superModerators is not empty">
		<div class="block">
			<div class="block-container">
				<h2 class="block-header">{{ phrase('super_moderators') }}</h2>
				<div class="block-body">
					<xf:datalist>
						<xf:foreach loop="$superModerators" value="$superMod">
							<xf:datarow>
								<xf:cell class="dataList-cell--min dataList-cell--image dataList-cell--imageSmall"
									href="{{ link('molly/super/edit', $superMod) }}">
									<xf:avatar user="$superMod.User" size="s" href="" />
								</xf:cell>
								<xf:main href="{{ link('molly/super/edit', $superMod) }}"
									label="{$superMod.User.username}" />
								<xf:action href="{{ link('users/edit', $superMod.User) }}">{{ phrase('user_info') }}</xf:action>
								<xf:delete href="{{ link('molly/super/delete', $superMod) }}" overlay="true" />
							</xf:datarow>
						</xf:foreach>
					</xf:datalist>
				</div>
			</div>
		</div>
	</xf:if>

	<xf:if is="$contentModerators is not empty">
		<div class="block">
			<div class="block-outer">
				<div class="block-outer-main">
					<a class="button button--link menuTrigger"
						data-xf-click="menu"
						role="button"
						tabindex="0"
						aria-expanded="false"
						aria-haspopup="true">{{ phrase('filter:') }} {{ $userIdFilter ? {$users.{$userIdFilter}.username} : phrase('(all)') }}</a>

					<div class="menu" data-menu="menu" aria-hidden="true">
						<div class="menu-content">
							<h3 class="menu-header">{{ phrase('content_moderators') }}</h3>
							<a href="{{ link('molly') }}" class="menu-linkRow {{ !$userIdFilter ? 'is-selected' : '' }}">{{ phrase('(all)') }}</a>
							<xf:foreach loop="$users" value="$user">
								<a href="{{ link('molly', null, {'user_id': $user.user_id}) }}"
									class="menu-linkRow {{ ($userIdFilter && $userIdFilter == $user.user_id) ? 'is-selected' : '' }}">
									<span>{$user.username}</span>
								</a>
							</xf:foreach>
						</div>
					</div>
				</div>
			</div>
			<div class="block-container">
				<h2 class="block-header">{{ phrase('content_moderators') }}</h2>
				<div class="block-body">
					<xf:datalist>
						<xf:foreach loop="$users" key="$userId" value="$user">
							<xf:if is="{$contentModerators.{$userId}}">
								<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
									<xf:cell colspan="2">{$user.username}</xf:cell>
								</xf:datarow>
								<tbody class="js-moderatorInsert-{$userId}">
									<xf:foreach loop="{$contentModerators.{$userId}}" value="$contentMod">
										<xf:datarow>
											<xf:main href="{{ link('molly/content/edit', $contentMod) }}"
												label="{$contentMod.getContentTitle()}" />
											<xf:delete href="{{ link('molly/content/delete', $contentMod) }}" overlay="true" />
										</xf:datarow>
									</xf:foreach>
									<xf:if is="$displayLimit AND {$contentModeratorTotals.{$userId}} > $displayLimit">
										<xf:datarow>
											<xf:cell colspan="2" class="dataList-cell--link">
												<a href="{{ link('molly', null, {'user_id': $userId}) }}" data-xf-click="inserter" data-replace=".js-moderatorInsert-{$userId}" data-animate-replace="false">{{ phrase('ellipsis_and_x_more', {'count': ({$contentModeratorTotals.{$userId}} - $displayLimit)|number}) }}</a>
											</xf:cell>
										</xf:datarow>
									</xf:if>
								</tbody>
							</xf:if>
						</xf:foreach>
					</xf:datalist>
				</div>
			</div>
		</div>
	</xf:if>

	</xf:contentcheck>
<xf:else />
	<div class="blockMessage">{{ phrase('there_currently_no_moderators_use_link_create') }}</div>
</xf:if>]]></template>
  <template type="public" title="fs_molly_form_upload" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{$fieldLabel}</xf:title>

<xf:form action="{$formAction}" ajax="true" upload="true" class="block">
    <div class="block-container">
        <div class="block-body">
            <xf:uploadrow name="file"
                          label="{$fieldLabel}"
                          explain="{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
                                'width': $baseWidth,
                                'height': $baseHeight
                          }) }}" />

            <xf:if is="$canDelete">
                <xf:checkboxrow>
                    <xf:option name="delete">{{ phrase('tlg_delete_existing_image') }}</xf:option>
                </xf:checkboxrow>
            </xf:if>
        </div>

        <xf:submitrow submit="{{ phrase('upload') }}" rowtype="simple" icon="upload" />
    </div>
</xf:form>]]></template>
  <template type="public" title="fs_molly_index" version_id="1000100" version_string="1.0.1 Alpha"><![CDATA[<xf:title page="{$page}">{{ phrase('fs_molly') }}</xf:title>

<xf:page
  option="searchConstraints"
  value="{{ {
	phrase('fs_auction_auctions'): {'search_type': 'fs_auction_auctions'}
} }}"
/>

<xf:pageaction if="$xf.visitor">
    <xf:button
    href="{{ link('molly/add') }}"
    class="button--cta"
    icon="write"
    >{{ phrase('fs_molly_add_sub_forum') }}</xf:button
  >
</xf:pageaction>
  

<div
  class="block"
  data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}"
  data-type="fs_molly"
  data-href="{{ link('inline-mod') }}"
>
  <div class="block-outer">

  </div>
  <div class="block-container">

    <!--Listing View--->
    <div class="block-body">
		
    <!--Sub Forums List View--->
		<xf:if is="count($subForums) != 0">
            
			    <xf:set var="$dummyArray" value="{{range(0,3)}}" />
		
		
			 	<div class="block groupListBlock" data-xf-init="inline-mod"
         data-type="tl_group"
         data-href="{{ link('inline-mod') }}">
		
		<div class="groupList h-dFlex h-dFlex--wrap gridCardList--flex--2-col" data-xf-init="tl_groups_list">
		
		 <xf:foreach loop="{$subForums}" value="$value">

    
			 <xf:macro
					name="molly_sub_forum_list"
					arg-subForum="{$value}"
				  />
			 
  </xf:foreach>
					</div>
		</div>
			</xf:if>
		
	<xf:css src="tlg_group_list.less" />
    <xf:css src="tlg_style.less" />
	<xf:css src="tlg_grid_card.less" />

    <xf:js src="Truonglv/Groups/group.js" addon="Truonglv/Groups" min="1" />
	 
		
    <!--Sub Forums List View--->

      <div class="block-footer">
        <span class="block-footer-counter"
          >{{ display_totals($totalReturn, $total) }}</span
        >
      </div>
    </div>
  </div>

  <div class="block-outer block-outer--after">

    <xf:showignored wrapperclass="block-outer-opposite" />
  </div>
</div>

<xf:page option="sideNavTitle">{{ phrase('fs_molly_side_community') }}</xf:page>

<xf:sidenav>
	<xf:comment>
  <xf:macro
    template="fs_auction_category_list_macros"
    name="simple_list_block"
    arg-categoryTree="null"
  />
	</xf:comment>
	
	<div class="block">
		<div class="block-container">
			<h3 class="block-header">{{ phrase('fs_molly_side_community') }}</h3>
			<div class="block-body">
				
					<div class="block-row">{{ phrase('n_a') }}</div>
				
			</div>
		</div>
	</div>

</xf:sidenav>

<!-- Filter Bar Macro Start -->

    <!--Sub Forums List View--->

<xf:macro
  name="molly_sub_forum_list"
  arg-subForum="!"
>	  			
	  <div class="gridCard js-inlineModContainer visible public" id="{{ unique_id() }}">
		  
        <div class="gridCard--container">
			
			<!-- Cover -->
			
			<div class="gridCard--cover">
			
				<div class="groupCover--wrapper">
                
        <div class="groupCover groupCoverFrame groupCover--default" style="background-color:#1f7a5c;color:#70dbb8">
            <a href="/xenforo/index.php?molly" style="background-color:#1f7a5c;color:#70dbb8">
                <xf:if is="$subForum.CoverAttachment">
                <img data-crop="{$subForum->getCoverCropData()|json}"
                     class="groupCover--img groupCover--lazy" data-xf-init="tlg-cover-setup" data-force-height="100"
                     {{ ($subForum.getImageAttributes()) ? (' ' . $subForum.getImageAttributes()) : '' }}/>
            <xf:else />
                <span class="groupCover--text">{{ snippet($subForum.title, 25) }}</span>
            </xf:if>
            </a>
        </div>
                   
                

            </div>
			
			</div>
			
			<!-- Cover -->
			
			
			<!-- Header -->
			
	  
	   <div class="gridCard--header">
		   
			<!-- Avatar -->
		   
		   <div class="gridCard--header--avatar">
           <xf:if is="$subForum.AvatarAttachment">
			   <a href="{{ link('molly', $subForum) }}"
       class="groupAvatar groupAvatar--link groupAvatar--default" style="background-color:#e08585;color:#8f2424">
			<img src="{{ $subForum.AvatarAttachment.thumbnail_url }}"
                 class="groupAvatar--img bbImage" width="100" height="100"
                 data-width="{$subForum.AvatarAttachment.width}"
                 data-height="{$subForum.AvatarAttachment.height}"
                 alt="{$subForum.title}"/>
    </a>		   
			   
			<xf:else />
			   <xf:comment>
            <span class="groupAvatar--text groupAvatar--dynamic">{$xf.visitor.username}</span>
				   </xf:comment>
			   			  <xf:avatar user="$xf.visitor" size="l" />
			</xf:if>
		   </div>
		   
			<!-- Avatar -->
		   
			<!-- Header Main -->
              
                <div class="gridCard--header--main">
                    
		<xf:trim>
        <a href="{{ link('molly', $subForum) }}" class="gridCard--header--title"
           data-tp-primary="on">
            <span>{$subForum.title}</span>
        </a>
    </xf:trim>					
					
					
		<xf:trim>
        <ul class="listInline group--counterList u-muted">
            <li class="groupItem-stat groupItem-stat--viewCount">
                <xf:fa icon="fa-eye" />
                1
            </li>
            <li class="groupItem-stat groupItem-stat--memberCount">
                <xf:fa icon="fa-users" />
                2
            </li>
            <xf:if is="$xf.options.tl_groups_enableForums">
                <li class="groupItem-stat groupItem-stat--discussionCount">
                    <xf:fa icon="fa-comment" />
                    3
                </li>
            </xf:if>
            <li class="groupItem-stat groupItem-stat--eventCount">
                <xf:fa icon="fa-calendar" />
                4
            </li>
        </ul>
    </xf:trim>
						
                </div>
		   
			<!-- Header Main -->
		   
			<!-- Action -->
		   
		   <div class="gridCard--header--actions">
		   
			<div class="buttonGroup-buttonWrapper">
                <xf:button class="button--link menuTrigger"
                       data-xf-click="menu"
                       aria-expanded="false"
                       aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}"><xf:fa icon="fa-cog" /></xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
                    <div class="menu-content">
                                <a href="{{ link('molly/add-moderator', $subForum) }}"
                                       class="menu-linkRow"
                                       data-xf-click="overlay">
                                {{  phrase('fs_molly_moderator')  }}
                            </a>
                           
                            <hr class="menu-separator" />
                    </div>
                </div>
            </div>   
			   
		   </div>
		   
			<!-- Action -->
		   
            </div>
			
			<!-- Header -->
			
	  <xf:if contentcheck="true">
                <div class="gridCard--body">
                    <xf:contentcheck>
					
						<div class="groupList--description u-muted">{$subForum.description}</div>
						
					</xf:contentcheck>
                </div>
            </xf:if>
			
		  </div>
		  
	  </div>

</xf:macro>

    <!--Sub Forums List View--->]]></template>
  <template type="public" title="fs_molly_sub_forum_add_edit" version_id="1000100" version_string="1.0.1 Alpha"><![CDATA[<xf:if is="$forum.isInsert()">
	<xf:title>{{ phrase('add_forum') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('edit_forum:') }} {$node.title}</xf:title>
</xf:if>

<xf:pageaction if="$forum.isUpdate()">
	<div class="buttonGroup">
		<xf:if is="$canChangeForumType">
			<xf:button href="{{ link('molly/change-type', $node) }}" overlay="true">{{ phrase('change_type') }}</xf:button>
		</xf:if>
		<xf:button href="{{ link('molly/delete', $node) }}" icon="delete" overlay="true" />
	</div>
</xf:pageaction>

<xf:form action="{{ link('molly/save', $node) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:macro template="node_edit_macros" name="title" arg-node="{$node}" />
			<xf:macro template="node_edit_macros" name="description" arg-node="{$node}" />
			
			<xf:textboxrow name="replace_route" value="{$routeFilter.replace_route_readable}"
				maxlength="{{ max_length($routeFilter, 'replace_route') }}"
				label="{{ phrase('replace_with') }}"
				explain="{{ phrase('route_filter_find_replace_fields_support_wildcards') }}"
				dir="ltr" 
				required="required" hint="{{ phrase('required') }}"/>
			
			
			 <xf:uploadrow name="avatarFile"
                          label="{{ phrase('fs_forum_group_avatar') }}"
                          explain="{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
                                'width': $baseWidth,
                                'height': $baseHeight
                          }) }}" />
			
			<xf:uploadrow name="coverFile"
                          label="{{ phrase('fs_forum_group_cover') }}"
                          explain="{{ phrase('it_is_recommended_that_you_use_image_that_is_at_least_x_pixels', {
                                'width': $baseWidth,
                                'height': $baseHeight
                          }) }}" />
				
			
			<xf:textboxrow name="room_name"
						   value="{$room.room_name}"
						   label="{{ phrase('siropu_chat_room_name') }}"
						   maxlength="{{ max_length($room, 'room_name') }}" />

			<xf:textarearow name="room_description"
							value="{$room.room_description}"
							label="{{ phrase('siropu_chat_room_description') }}"
							maxlength="{{ max_length($room, 'room_description') }}"
							rows="3" />
			
			<xf:if is="$xf.visitor.canSetSiropuChatRoomUsers()">
				<xf:tokeninputrow name="room_users"
						   value="{{ array_values($room.room_users)|join(',') }}"
						   label="{{ phrase('siropu_chat_room_users') }}"
						   explain="{{ phrase('siropu_chat_room_users_explain') }}"
							hint="{{ phrase('optional') }}"
						   href="{{ link('members/find') }}" />
			</xf:if>

			<xf:if is="$xf.visitor.canPasswordProtectSiropuChatRooms()">
				<xf:textboxrow name="room_password"
							   value="{$room.room_password}"
							   label="{{ phrase('siropu_chat_room_password') }}"
							   explain="{{ phrase('siropu_chat_room_password_explain') }}"
							   hint="{{ phrase('optional') }}"
							   maxlength="{{ max_length($room, 'room_password') }}" />
			</xf:if>

			<xf:hiddenval name="forum_type_id">{$forumTypeId}</xf:hiddenval>

			<hr class="formRowSep" />
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="public" title="fs_molly_thread_list_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="item"
	arg-thread="!"
	arg-forum=""
	arg-forceRead="{{ false }}"
	arg-showWatched="{{ true }}"
	arg-allowInlineMod="{{ true }}"
	arg-chooseName=""
	arg-extraInfo=""
	arg-allowEdit="{{ true }}">

	<xf:css src="structured_list.less" />

	<div class="structItem structItem--thread{{ $thread.prefix_id ? ' is-prefix' . $thread.prefix_id : '' }}{{ $thread.isIgnored() ? ' is-ignored' : '' }}{{ ($thread.isUnread() AND !$forceRead) ? ' is-unread' : '' }}{{ $thread.discussion_state == 'moderated' ? ' is-moderated' : '' }}{{ $thread.discussion_state == 'deleted' ? ' is-deleted' : '' }} js-inlineModContainer js-threadListItem-{$thread.thread_id}" data-author="{{ $thread.User.username ?: $thread.username }}">

	<xf:extension name="icon_cell">
		<div class="structItem-cell structItem-cell--icon">
			<div class="structItem-iconContainer">
				<xf:avatar user="$thread.User" size="s" defaultname="{$thread.username}" />
				<xf:if is="$thread.getUserPostCount()">
					<xf:avatar user="$xf.visitor" size="s"
						href=""
						class="avatar--separated structItem-secondaryIcon"
						tabindex="0"
						data-xf-init="tooltip"
						data-trigger="auto"
						title="{{ phrase('you_have_posted_x_messages_in_this_thread', {'count': $thread.getUserPostCount() }) }}" />
				</xf:if>
			</div>
		</div>
	</xf:extension>

	<xf:extension name="main_cell">
		<div class="structItem-cell structItem-cell--main" data-xf-init="touch-proxy">
			<xf:if contentcheck="true">
				<ul class="structItem-statuses">
				<xf:contentcheck>
				<xf:extension name="statuses">
					<xf:if is="property('reactionSummaryOnLists') == 'status' && $thread.first_post_reactions">
						<li><xf:reactions summary="true" reactions="{$thread.first_post_reactions}" /></li>
					</xf:if>
					<xf:extension name="before_status_state"></xf:extension>
					<xf:if is="$thread.discussion_state == 'moderated'">
						<li>
							<xf:set var="$moderatedStatus">
								<i class="structItem-status structItem-status--moderated" aria-hidden="true" title="{{ phrase('awaiting_approval')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('awaiting_approval') }}</span>
							</xf:set>
							<xf:if is="$thread.canCleanSpam()">
								<a href="{{ link('spam-cleaner', $thread) }}" data-xf-click="overlay">{$moderatedStatus}</a>
							<xf:else />
								{$moderatedStatus}
							</xf:if>
						</li>
					</xf:if>
					<xf:if is="$thread.discussion_state == 'deleted'">
						<li>
							<i class="structItem-status structItem-status--deleted" aria-hidden="true" title="{{ phrase('deleted')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('deleted') }}</span>
						</li>
					</xf:if>
					<xf:if is="!$thread.discussion_open">
						<li>
							<i class="structItem-status structItem-status--locked" aria-hidden="true" title="{{ phrase('locked')|for_attr }}"></i>
							<span class="u-srOnly">{{ phrase('locked') }}</span>
						</li>
					</xf:if>

					<xf:extension name="status_sticky">
						<xf:if is="$thread.sticky">
							<li>
								<i class="structItem-status structItem-status--sticky" aria-hidden="true" title="{{ phrase('sticky')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('sticky') }}</span>
							</li>
						</xf:if>
					</xf:extension>

					<xf:extension name="before_status_watch"></xf:extension>
					<xf:if is="{$showWatched} AND {$xf.visitor.user_id}">
						<xf:if is="{$thread.Watch.{$xf.visitor.user_id}}">
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('thread_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('thread_watched') }}</span>
							</li>
							<xf:elseif is="!$forum AND {$thread.Forum.Watch.{$xf.visitor.user_id}}" />
							<li>
								<i class="structItem-status structItem-status--watched" aria-hidden="true" title="{{ phrase('forum_watched')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('forum_watched') }}</span>
							</li>
						</xf:if>
					</xf:if>

					<xf:extension name="before_status_type"></xf:extension>
					<xf:if is="$thread.discussion_type == 'redirect'">
						<xf:extension name="thread_type_redirect">
							<li>
								<i class="structItem-status structItem-status--redirect" aria-hidden="true" title="{{ phrase('redirect')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('redirect') }}</span>
							</li>
						</xf:extension>
					<xf:elseif is="$thread.discussion_type == 'question' && $thread.type_data.solution_post_id" />
						<xf:extension name="thread_type_question_solved">
							<li>
								<i class="structItem-status structItem-status--solved" aria-hidden="true" title="{{ phrase('solved')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('solved') }}</span>
							</li>
						</xf:extension>
					<xf:elseif is="!$forum || $forum.forum_type_id == 'discussion'" />
						<xf:extension name="thread_type_icon">
							<xf:if is="$thread.discussion_type != 'discussion'">
								<xf:set var="$threadTypeHandler" value="{{ $thread.getTypeHandler() }}" />
								<xf:if is="$threadTypeHandler.getTypeIconClass()">
									<li>
										<xf:set var="$threadTypePhrase" value="{{ $threadTypeHandler.getTypeTitle() }}" />
										<xf:fa class="structItem-status" icon="{{ $threadTypeHandler.getTypeIconClass() }}" title="{$threadTypePhrase|for_attr}" />
										<span class="u-srOnly">{$threadTypePhrase}</span>
									</li>
								</xf:if>
							</xf:if>
						</xf:extension>
					</xf:if>
				</xf:extension>
				</xf:contentcheck>
				</ul>
			</xf:if>

			<div class="structItem-title">
				<xf:set var="$canPreview" value="{{ $thread.canPreview() }}" />
				<xf:if is="$thread.prefix_id">
					<xf:if is="$forum">
						<a href="{{ link('forums', $forum, {'prefix_id': $thread.prefix_id}) }}" class="labelLink" rel="nofollow">{{ prefix('thread', $thread, 'html', '') }}</a>
					<xf:else />
						{{ prefix('thread', $thread, 'html', '') }}
					</xf:if>
				</xf:if>
				<a href="{{ link('threads' . (($thread.isUnread() AND !$forceRead) ? '/unread' : ''), $thread) }}" class="" data-tp-primary="on" data-xf-init="{{ $canPreview ? 'preview-tooltip' : '' }}" data-preview-url="{{ $canPreview ? link('threads/preview', $thread) : '' }}">{$thread.title}</a>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
					<xf:contentcheck>
						<xf:if is="property('reactionSummaryOnLists') == 'minor_opposite' && $thread.first_post_reactions">
							<li><xf:reactions summary="true" reactions="{$thread.first_post_reactions}" /></li>
						</xf:if>
						<xf:if is="{$extraInfo}">
							<li>{$extraInfo}</li>
						<xf:elseif is="$allowEdit AND $thread.canEdit() AND $thread.canUseInlineModeration()" />
							<xf:if is="!$allowInlineMod OR !$forum">
								<xf:set var="$editParams" value="{{ {
									'_xfNoInlineMod': !$allowInlineMod ? 1 : null,
									 '_xfForumName': !$forum ? 1 : 0
								} }}" />
							<xf:else />
								<xf:set var="$editParams" value="{{ [] }}" />
							</xf:if>
							<xf:if is="$thread.discussion_type != 'redirect'">
								<li class="structItem-extraInfoMinor">
									<a href="{{ link('threads/edit', $thread) }}" data-xf-click="overlay" data-cache="false" data-href="{{ link('threads/edit', $thread, $editParams) }}">
										{{ phrase('edit') }}
									</a>
								</li>
							</xf:if>
						</xf:if>
						<xf:if is="$chooseName">
							<li><xf:checkbox standalone="true">
								<xf:option name="{$chooseName}[]" value="{$thread.thread_id}" class="js-chooseItem" />
							</xf:checkbox></li>
						<xf:elseif is="$allowInlineMod AND $thread.canUseInlineModeration()" />
							<li><xf:checkbox standalone="true">
								<xf:option value="{$thread.thread_id}" class="js-inlineModToggle"
									data-xf-init="tooltip"
									title="{{ phrase('select_for_moderation') }}"
									label="{{ phrase('select_for_moderation') }}"
									hiddenlabel="true"
								/>
							</xf:checkbox></li>
						</xf:if>
					</xf:contentcheck>
					</ul>
				</xf:if>

				<xf:if is="$thread.discussion_state == 'deleted'">
					<xf:if is="{$extraInfo}"><span class="structItem-extraInfo">{$extraInfo}</span></xf:if>

					<xf:macro template="deletion_macros" name="notice" arg-log="{$thread.DeletionLog}" />
				<xf:else />
					<ul class="structItem-parts">
						<li><xf:username user="$thread.User" defaultname="{$thread.username}" /></li>
						<li class="structItem-startDate"><a href="{{ link('threads', $thread) }}" rel="nofollow"><xf:date time="{$thread.post_date}" /></a></li>
						<xf:if is="!$forum">
							<li><a href="{{ link('forums', $thread.Forum) }}">{$thread.Forum.title}</a></li>
						</xf:if>
					</ul>

					<xf:if is="$thread.discussion_type != 'redirect' && $thread.reply_count >= $xf.options.messagesPerPage && $xf.options.lastPageLinks">
						<span class="structItem-pageJump">
						<xf:foreach loop="{{ last_pages($thread.reply_count + 1, $xf.options.messagesPerPage, $xf.options.lastPageLinks) }}" value="$p">
							<a href="{{ link('threads', $thread, {'page': $p}) }}">{$p}</a>
						</xf:foreach>
						</span>
					</xf:if>
				</xf:if>
			</div>
		</div>
	</xf:extension>

	<xf:extension name="meta_cell">
		<div class="structItem-cell structItem-cell--meta" title="{{ phrase('first_message_reaction_score:')|for_attr }} {$thread.first_post_reaction_score|number}">
			<dl class="pairs pairs--justified">
				<dt>{{ phrase('replies') }}</dt>
				<dd>{{ $thread.discussion_type == 'redirect' ? '&ndash;' : $thread.reply_count|number_short }}</dd>
			</dl>
			<dl class="pairs pairs--justified structItem-minor">
				<dt>{{ phrase('views') }}</dt>
				<dd>{{ $thread.discussion_type == 'redirect' ? '&ndash;' : ($thread.view_count > $thread.reply_count ? $thread.view_count|number_short : number_short($thread.reply_count+1)) }}</dd>
			</dl>
		</div>
	</xf:extension>

	<xf:extension name="latest_cell">
		<div class="structItem-cell structItem-cell--latest">
			<xf:if is="$thread.discussion_type == 'redirect'">
				{{ phrase('n_a') }}
			<xf:else />
				<a href="{{ link('threads/latest', $thread) }}" rel="nofollow"><xf:date time="{$thread.last_post_date}" class="structItem-latestDate" /></a>
				<div class="structItem-minor">
					<xf:if is="$xf.visitor.isIgnoring($thread.last_post_user_id)">
						{{ phrase('ignored_member') }}
					<xf:else />
						<xf:username user="{$thread.LastPoster}" defaultname="{$thread.last_post_username}" />
					</xf:if>
				</div>
			</xf:if>
		</div>
	</xf:extension>

	<xf:extension name="icon_end_cell">
		<div class="structItem-cell structItem-cell--icon structItem-cell--iconEnd">
			<div class="structItem-iconContainer">
				<xf:if is="$xf.visitor.isIgnoring($thread.last_post_user_id) OR $thread.discussion_type == 'redirect'">
					<xf:avatar user="{{ null }}" size="xxs" />
				<xf:else />
					<xf:avatar user="{$thread.LastPoster}" defaultname="{$thread.last_post_username}" size="xxs" />
				</xf:if>
			</div>
		</div>
	</xf:extension>

	</div>
</xf:macro>

<xf:macro name="item_new_posts" arg-thread="!">
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$thread.LastPoster" size="xxs" defaultname="{$thread.last_post_username}" />
		</div>
		<div class="contentRow-main contentRow-main--close">
			<xf:if is="$thread.isUnread()">
				<a href="{{ link('threads/unread', $thread) }}">{{ prefix('thread', $thread) }}{$thread.title}</a>
			<xf:else />
				<a href="{{ link('threads/post', $thread, {'post_id': $thread.last_post_id}) }}">{{ prefix('thread', $thread) }}{$thread.title}</a>
			</xf:if>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li>{{ phrase('latest_x', {'name': $thread.last_post_cache.username}) }}</li>
					<li><xf:date time="{$thread.last_post_date}" /></li>
				</ul>
			</div>
			<div class="contentRow-minor contentRow-minor--hideLinks">
				<a href="{{ link('forums', $thread.Forum) }}">{$thread.Forum.title}</a>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="item_new_threads" arg-thread="!">
	<div class="contentRow">
		<div class="contentRow-figure">
			<xf:avatar user="$thread.User" size="xxs" defaultname="{$thread.username}" />
		</div>
		<div class="contentRow-main contentRow-main--close">
			<a href="{{ link('threads', $thread) }}">{{ prefix('thread', $thread) }}{$thread.title}</a>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li>{{ phrase('started_by_x', {'name': $thread.username}) }}</li>
					<li><xf:date time="{$thread.post_date}" /></li>
					<li>{{ phrase('replies:') }} {$thread.reply_count|number_short}</li>
				</ul>
			</div>
			<div class="contentRow-minor contentRow-minor--hideLinks">
				<a href="{{ link('forums', $thread.Forum) }}">{$thread.Forum.title}</a>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="quick_thread"
	arg-forum="!"
	arg-page="1"
	arg-order="last_post_date"
	arg-direction="desc"
	arg-prefixes="{{ [] }}">

	<xf:css src="structured_list.less" />

	<xf:if is="$forum.canCreateThread() OR $forum.canCreateThreadPreReg()">

		<xf:js src="xf/thread.js" min="1" />

		<xf:set var="$inlineMode" value="{{ ($page == 1 && $order == 'last_post_date' && $direction == 'desc') ? true : false }}" />

		<xf:form action="{{ link('forums/post-thread', $forum, {'inline-mode': $inlineMode}) }}" ajax="true"
			class="structItem structItem--quickCreate"
			draft="{{ link('forums/draft', $forum) }}"
			data-xf-init="quick-thread"
			data-focus-activate=".js-titleInput"
			data-focus-activate-href="{{ link('forums/post-thread', $forum, {'inline-mode': true}) }}"
			data-focus-activate-target=".js-quickThreadFields"
			data-insert-target=".js-threadList"
			data-replace-target=".js-emptyThreadList">

		<xf:extension name="icon_cell">
			<div class="structItem-cell structItem-cell--icon">
				<div class="structItem-iconContainer">
					<xf:avatar user="$xf.visitor" size="s" />
				</div>
			</div>
		</xf:extension>

		<xf:extension name="main_cell">
			<div class="structItem-cell structItem-cell--newThread js-prefixListenContainer">

				<xf:formrow rowtype="noGutter noLabel fullWidth noPadding mergeNext"
					label="{{ phrase('title') }}">

					<xf:prefixinput maxlength="{{ max_length('XF:Thread', 'title') }}"
						placeholder="{$forum.thread_prompt}"
						title="{{ phrase('post_new_thread_in_this_forum') }}"
						prefix-value="{$forum.default_prefix_id}"
						type="thread"
						prefixes="{$prefixes}"
						data-xf-init="tooltip"
						rows="1"
						help-href="{{ link('forums/prefix-help', $forum) }}"
						help-skip-initial="{{ true }}" />

					<!--[XF:qt_title_after]-->
				</xf:formrow>

				<div class="js-quickThreadFields inserter-container is-hidden"><!--{{ phrase('loading...') }}--></div>
			</div>
		</xf:extension>

		</xf:form>
	</xf:if>

</xf:macro>]]></template>
  <template type="public" title="fs_molly_view" version_id="1000100" version_string="1.0.1 Alpha"><![CDATA[<xf:title>{$group.name}</xf:title>

	<xf:button href="{{ link('molly/moderator-list', $subForums) }}" class="button--cta" icon="write">
		{{ phrase('fs_forum_group_moderator_list') }}
	</xf:button>

<xf:css src="tlg_style.less" />

<xf:sidenav>
	
	<!-- Avatar -->
	
	<div class="block groupAvatar-block">
           <xf:if is="$subForums.AvatarAttachment">
        <a href="{{ link('molly', $subForums) }}"
       class="groupAvatar groupAvatar--link groupAvatar--default" style="background-color:#e08585;color:#8f2424">
			<img src="{{ $subForums.AvatarAttachment.thumbnail_url }}"
                 class="groupAvatar--img bbImage" width="250" height="250"
                 data-width="{$subForums.AvatarAttachment.width}"
                 data-height="{$subForums.AvatarAttachment.height}"
                 alt="{$subForums.title}"/>
    </a>
			   
			<xf:else />
			   <xf:comment>
            <span class="groupAvatar--text groupAvatar--dynamic">{$xf.visitor.username}</span>
			   </xf:comment>
			  <xf:avatar user="$xf.visitor" size="l" />
			</xf:if>
    </div>
	
	<!-- Avatar -->

</xf:sidenav>

<div class="groupWrapper groupWrapper-{$subForums.node_id}">

	<!-- Header -->

	<xf:page option="headerHtml">
        <div class="contentRow contentRow--hideFigureNarrow">
            <div class="contentRow-main">
                <div class="p-title">
                    <h1 class="p-title-value">
                        {$subForums.title}
                    </h1>
                </div>
                    <div class="p-description">
                        {$subForums.description}
                    </div>
            </div>
        </div>
    </xf:page>

	<!-- Header -->

	<!-- Cover Header -->

	<div class="block">
        <div class="block-container groupCover-header">
            <div class="block-body">
               <div class="groupCover groupCoverFrame groupCover--default" style="background-color:#e08585;color:#8f2424">
        <a href="{{ link('molly', $subForums) }}" style="background-color:#e08585;color:#8f2424">
                <xf:if is="$subForums.CoverAttachment">
                <img data-crop="{$subForums->getCoverCropData()|json}"
                     class="groupCover--img groupCover--lazy" data-xf-init="tlg-cover-setup"
                     {{ ($subForums.getImageAttributes()) ? (' ' . $subForums.getImageAttributes()) : '' }}/>
            <xf:else />
                <span class="groupCover--text">{{ snippet($subForums.title, 25) }}</span>
            </xf:if>
        </a>
    </div>
            </div>

            <xf:if is="$isEditing is not empty">
                <xf:macro name="cover_editor_setup" arg-group="{$group}"
                          arg-width="{$baseWidth}"
                          arg-height="{$baseHeight}" />
            <xf:else />
               
				 <div class="gridCard--header--actions">
		   
			<div class="buttonGroup-buttonWrapper">
                <xf:button class="button--link menuTrigger"
                       data-xf-click="menu"
                       aria-expanded="false"
                       aria-haspopup="true" title="{{ phrase('more_options')|for_attr }}"><xf:fa icon="fa-cog" /></xf:button>
					<div class="menu" data-menu="menu" aria-hidden="true">
                    <div class="menu-content">
                                <a href="{{ link('molly/add-moderator', $subForums) }}"
                                       class="menu-linkRow"
                                       data-xf-click="overlay">
                                {{  phrase('fs_molly_moderator')  }}
                            </a>
						
						<a href="{{ link('molly/avatar', $subForums) }}"
                                       class="menu-linkRow"
                                       data-xf-click="overlay">
                                {{  phrase('fs_molly_upload_avatar')  }}
                            </a>
						
						<a href="{{ link('molly/cover', $subForums) }}"
                                       class="menu-linkRow"
                                       data-xf-click="overlay">
                                {{  phrase('fs_molly_upload_cover')  }}
                            </a>
                           
                            <hr class="menu-separator" />
                    </div>
                </div>
            </div>   
			   
		   </div>
				
            </xf:if>

        </div>
    </div>

	<!-- Cover Header -->
	
	<xf:comment>
	
		<xf:pageaction if="$forum.canCreateThread() OR $forum.canCreateThreadPreReg()">
	<xf:button href="{{ link('forums/post-thread', $forum) }}" class="button--cta" icon="write">
		{{ phrase('post_thread') }}
	</xf:button>
</xf:pageaction>
		
	</xf:comment>
	
	<!-- Thread BTN -->
	
	
	<xf:button href="{{ link('forums/post-thread', $subForums) }}" class="button--cta" icon="write" style="float: right">
		{{ phrase('post_thread') }}
	</xf:button>
	
	<!-- Thread BTN -->
	
	
	<!-- Thread Lists -->
	
		<div class="block-container">
		<div class="block-body">
				<div class="structItemContainer">
					<xf:if is="$threads is not empty">
						<div class="structItemContainer-group js-threadList">
							<xf:if is="$threads is not empty">
								<xf:foreach loop="$threads" value="$thread">
									<xf:macro name="fs_molly_thread_list_macros::item"
										arg-thread="{$thread}"
										arg-forum="{$forum}"
										args="null"  />
								</xf:foreach>
							</xf:if>
						</div>				
					<xf:else />
						<div class="structItemContainer-group js-threadList">
								<div class="structItem js-emptyThreadList">
									<div class="structItem-cell">{{ phrase('there_no_threads_in_this_forum') }}</div>
								</div>
						</div>
					</xf:if>
				</div>
		</div>
	</div>
	
	<!-- Thread Lists -->
	
</div>]]></template>
  <template type="public" title="moderator_add_choice" version_id="1000100" version_string="1.0.1 Alpha"><![CDATA[<xf:title>{{ phrase('add_moderator') }}</xf:title>

<xf:form action="{{ link('molly/add-moderator', $subForum) }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="username" value="{$username}" type="search" ac="single"
				placeholder="{{ phrase('user_name...') }}"
				label="{{ phrase('moderator_user_name') }}" />

			<xf:radiorow name="type" value="{$type}"
				label="{{ phrase('type_of_moderator') }}">

				<xf:option value="_super"
					label="{{ phrase('super_moderator') }}"
					hint="{{ phrase('super_moderator_can_moderate_entire_board') }}" />

					<xf:option value="node" label="Forum moderator" selected="true"/>
			</xf:radiorow>
		</div>
		<xf:submitrow submit="{{ phrase('add_moderator...') }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="moderator_edit" version_id="1000100" version_string="1.0.1 Alpha"><![CDATA[<xf:title>{{ phrase('edit_moderator:') }} {$user.username}</xf:title>

<xf:pageaction if="$contentModerator ? $contentModerator.isUpdate() : $generalModerator.isUpdate()">
	<xf:if is="$contentModerator">
		<xf:button href="{{ link('molly/content/delete', $contentModerator) }}" icon="delete" overlay="true" />
	<xf:else />
		<xf:button href="{{ link('molly/super/delete', $generalModerator) }}" icon="delete" overlay="true" />
	</xf:if>
</xf:pageaction>

<xf:form action="{{ link('molly/moderator-save') }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:formrow label="{{ phrase('type_of_moderator') }}">
				<xf:if is="$contentTitle">
					{$contentTitle}
					<xf:else />
					{{ phrase('super_moderator') }}
				</xf:if>
			</xf:formrow>

			<hr class="formRowSep" />

			<xf:checkboxrow>
				<xf:option name="is_staff" selected="$isStaff"
					label="{{ phrase('display_user_as_staff') }}"
					hint="{{ phrase('if_selected_this_user_will_be_listed_publicly_as_staff_member') }}" />
			</xf:checkboxrow>			

			<div id="piGroups">
				
				<xf:foreach loop="$interfaceGroups" key="$interfaceGroupId" value="$interfaceGroup">
					<xf:if is="{$globalPermissions.{$interfaceGroupId}}">
						<xf:checkboxrow listclass="listColumns">
						
							<xf:foreach loop="{$globalPermissions.{$interfaceGroupId}}" value="$permission">
								<xf:option name="globalPermissions[{$permission.permission_group_id}][{$permission.permission_id}]"
									value="allow"
									selected="{{ {$existingValues.{$permission.permission_group_id}.{$permission.permission_id}} == 'allow' }}"
									label="{$permission.title}" />
							</xf:foreach>
						</xf:checkboxrow>
					</xf:if>
				</xf:foreach>

				<xf:foreach loop="$interfaceGroups" key="$interfaceGroupId" value="$interfaceGroup">
					<xf:if is="{$contentPermissions.{$interfaceGroupId}}">
						<xf:checkboxrow listclass="listColumns">
							<xf:foreach loop="{$contentPermissions.{$interfaceGroupId}}" value="$permission">
								<xf:option name="contentPermissions[{$permission.permission_group_id}][{$permission.permission_id}]"
									value="content_allow"
									selected="{{ {$existingValues.{$permission.permission_group_id}.{$permission.permission_id}} == 'content_allow' }}"
									label="{$permission.title}" />
							</xf:foreach>
						</xf:checkboxrow>
					</xf:if>
				</xf:foreach>

			</div>
		</div>
		<xf:submitrow icon="save" />
	</div>

	<xf:hiddenval name="user_id">{$generalModerator.user_id}</xf:hiddenval>
	<xf:hiddenval name="content_type">{$contentModerator.content_type}</xf:hiddenval>
	<xf:hiddenval name="content_id">{$contentModerator.content_id}</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="node_edit_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="title" arg-node="!">
	<xf:textboxrow name="node[title]" value="{$node.title}" label="{{ phrase('title') }}" />
</xf:macro>

<xf:macro name="description" arg-node="!">
	<xf:textarearow name="node[description]" value="{$node.description}" autosize="true"
		label="{{ phrase('description') }}"
		hint="{{ phrase('you_may_use_html') }}"
		explain="{{ phrase('node_description_explain') }}" />
</xf:macro>

<xf:macro name="node_name" arg-node="!" arg-optional="{{ true }}">
	<xf:textboxrow name="node[node_name]" value="{$node.node_name}"
		label="{{ phrase('url_portion') }}"
		hint="{{ $optional ? phrase('optional') : '' }}"
		explain="{{ $optional ? phrase('if_entered_url_to_forum_not_contain_id_change_breaks_urls') : '' }}"
		dir="ltr" />
</xf:macro>

<xf:macro name="position" arg-node="!" arg-nodeTree="!">
	<xf:selectrow name="node[parent_node_id]" value="{$node.parent_node_id}"
		label="{{ phrase('parent_node') }}">

		<xf:option value="0">{{ phrase('(none)') }}</xf:option>

		<xf:foreach loop="$nodeTree.getFlattened(0)" value="$treeEntry">
			<xf:option value="{$treeEntry.record.node_id}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
		</xf:foreach>
	</xf:selectrow>

	<xf:macro template="display_order_macros" name="row"
		arg-name="node[display_order]"
		arg-value="{$node.display_order}"
		arg-explain="{{ phrase('position_of_this_item_relative_to_other_nodes_with_same_parent') }}" />

	<xf:checkboxrow>
		<xf:option name="node[display_in_list]" selected="$node.display_in_list"
			label="{{ phrase('display_in_node_list') }}"
			hint="{{ phrase('if_unselected_users_will_not_see_this_node_in_list') }}" />
	</xf:checkboxrow>
</xf:macro>

<xf:macro name="style" arg-node="!" arg-styleTree="!">
	<xf:checkboxrow>
		<xf:option name="style_override" selected="$node.style_id"
			label="{{ phrase('override_user_style_choice') }}"
			explain="{{ phrase('if_specified_all_visitors_view_using_selected_style') }}">

			<xf:select name="node[style_id]" value="{$node.style_id}">
				<xf:foreach loop="$styleTree.getFlattened(0)" value="$treeEntry">
					<xf:option value="{$treeEntry.record.style_id}">{{ repeat('--', $treeEntry.depth) }} {$treeEntry.record.title}</xf:option>
				</xf:foreach>
			</xf:select>

		</xf:option>
	</xf:checkboxrow>
</xf:macro>

<xf:macro name="navigation" arg-node="!" arg-navChoices="!">
	<xf:set var="$defaultValue" value="{{ $node.Parent.effective_navigation_id ?: 'forums' }}" />
	<xf:set var="$defaultNav" value="{$navChoices.{$defaultValue}}" />
	<xf:selectrow name="node[navigation_id]" value="{$node.navigation_id}"
		label="{{ phrase('navigation_section') }}"
		explain="{{ phrase('navigation_section_explain') }}">

		<xf:option value="">{{ phrase('default') . ($defaultNav ? ' (' . $defaultNav.title . ')' : '') }}</xf:option>

		<xf:foreach loop="$navChoices" value="$nav">
			<xf:if is="$nav.navigation_id != '_default'">
				<xf:option value="{$nav.navigation_id}">{$nav.title}</xf:option>
			</xf:if>
		</xf:foreach>
	</xf:selectrow>
</xf:macro>]]></template>
</templates>
